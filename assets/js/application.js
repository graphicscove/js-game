!function(){return function e(t,i,n){function o(s,u){if(!i[s]){if(!t[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(r)return r(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[s]={exports:{}};t[s][0].call(c.exports,function(e){var i=t[s][1][e];return o(i||e)},c,c.exports,e,t,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}}()({1:[function(e,t,i){"use strict";e("./modules/game")},{"./modules/game":2}],2:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();var o=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.buildingsInfo=function(e){t.buildingTemplate="\n        <div>Farm Level "+t.city.buildings.farm.level+' <button data-behaviour="upgrade" data-type="farm">Upgrade '+t.city.buildings.farm.name+"</button></div>\n        <div>Forest level "+t.city.buildings.forest.level+' <button data-behaviour="upgrade" data-type="forest">Upgrade '+t.city.buildings.forest.name+"</button></div>\n        <div>Stone Mine level "+t.city.buildings.stonemine.level+' <button data-behaviour="upgrade" data-type="stonemine">Upgrade '+t.city.buildings.stonemine.name+"</button></div>\n        <div>Ore Mine level "+t.city.buildings.oremine.level+' <button data-behaviour="upgrade" data-type="oremine">Upgrade '+t.city.buildings.oremine.name+"</button></div>\n        <div>Gold Mine level "+t.city.buildings.goldmine.level+' <button data-behaviour="upgrade" data-type="goldmine">Upgrade '+t.city.buildings.goldmine.name+"</button></div>\n        ",$('[data-element="buildings"]').html(t.buildingTemplate)},this.resourceProduction=function(e){var i=t;Object.keys(t.city.buildings).map(function(e,t){var n=i.city.buildings[e].level,o=i.city.buildings[e].output,r=i.city.buildings[e].resource,s=i.city.resources[r];i.city.resources[r]=Number(s+n*o)}),t.resourceInfo()},this.buildingsUpgrade=function(e){var i=$(e.currentTarget).data("type"),n=t.city.buildings[i].level+1,o=t.city.buildings[i].cost,r=t.city.buildings[i].costMultiplier,s=0,u=t;console.log(o),console.log(r),$(e.currentTarget).attr("disabled",!0),Object.keys(t.city.buildings).map(function(e,t){console.log(e),console.log(u.city.buildings[i].cost.food),console.log(u.city.buildings[i].cost.wood),console.log(u.city.buildings[i].cost.stone),console.log(u.city.buildings[i].cost.ore),console.log(u.city.buildings[i].cost.gold)}),t.resourceInfo(),0===t.city.buildings[i].level?(s=1e3,setTimeout(function(){a()},s)):(s=t.city.buildings[i].level*n+"000",setTimeout(function(){a()},s));function a(){u.city.buildings[i].level=Number(Object.assign(n,u.city.buildings[i].level)),u.buildingsInfo()}},this.saveGame=function(e){localStorage.setItem("city",JSON.stringify(t.city))},this.loadGame=function(e){var i=localStorage.getItem("city");t.city=JSON.parse(i),t.cityInfo(),t.resourceInfo(),t.buildingsInfo()},fetch("../../data.json").then(function(e){return console.log(e),e.json()}).then(function(e){console.log(e)}),this.city={id:1,name:"Mercia",location:"1:1",resources:{food:100,wood:200,stone:0,ore:0,gold:0},buildings:{farm:{name:"Farm",resource:"food",level:0,output:2,cost:{food:200,wood:200,stone:200,ore:200,gold:200},costMultiplier:1.25},forest:{name:"forest",resource:"wood",level:0,output:1.5},stonemine:{name:"Stone Mine",resource:"stone",level:0,output:1},oremine:{name:"Ore Mine",resource:"ore",level:0,output:.75},goldmine:{name:"Gold Mine",resource:"gold",level:0,output:.25}}},this.cityInfo(),this.resourceInfo(),this.buildingsInfo(),$("body").on("click",'[data-behaviour="upgrade"]',this.buildingsUpgrade),$('[data-behaviour="save-game"]').on("click",this.saveGame),$('[data-behaviour="load-save"]').on("click",this.loadGame),window.setInterval(this.resourceProduction,1e3)}return n(e,[{key:"cityInfo",value:function(){this.cityTemplate="<p>\n        <span>City ID: "+this.city.id+"</span> |\n        <span>City Name: "+this.city.name+"</span> |\n        <span>City Location: "+this.city.location+"</span>\n        </p>",$('[data-element="city"]').html(this.cityTemplate)}},{key:"resourceInfo",value:function(){this.resourceTemplate="<p>\n        <span>Food: "+this.city.resources.food+"</span> |\n        <span>Wood: "+this.city.resources.wood+"</span> |\n        <span>Stone: "+this.city.resources.stone+"</span> |\n        <span>Ore: "+this.city.resources.ore+"</span> |\n        <span>Gold: "+this.city.resources.gold+"</span>\n        </p>",$('[data-element="resources"]').html(this.resourceTemplate)}}]),e}();i.default=new o},{}]},{},[1]);
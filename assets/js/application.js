!function(){return function t(e,o,i){function s(r,a){if(!o[r]){if(!e[r]){var c="function"==typeof require&&require;if(!a&&c)return c(r,!0);if(n)return n(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var l=o[r]={exports:{}};e[r][0].call(l.exports,function(t){var o=e[r][1][t];return s(o||t)},l,l.exports,t,e,o,i)}return o[r].exports}for(var n="function"==typeof require&&require,r=0;r<i.length;r++)s(i[r]);return s}}()({1:[function(t,e,o){"use strict";i(t("./modules/tabs")),i(t("./modules/lightbox"));t("./modules/game");function i(t){return t&&t.__esModule?t:{default:t}}},{"./modules/game":2,"./modules/lightbox":3,"./modules/tabs":5}],2:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),s=r(t("./notification")),n=r(t("./lightbox"));function r(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.buildingsInfo=function(t){var o=e;e.buildingTemplate="",Object.keys(e.city.buildings).map(function(t,e){var i=o.city.buildings[t].name,s=o.city.buildings[t].level+1,n="";o.resourceRequirement="",o.resourceRequirement+="Food: "+o.city.buildings[t].cost.food*s+" ",o.resourceRequirement+="Wood: "+o.city.buildings[t].cost.wood*s+" ",o.resourceRequirement+="Stone: "+o.city.buildings[t].cost.stone*s+" ",o.resourceRequirement+="Ore: "+o.city.buildings[t].cost.ore*s+" ",o.resourceRequirement+="Gold: "+o.city.buildings[t].cost.gold*s+" ",n=o.city.buildings[t].level*s==0?"1s":o.city.buildings[t].level*s+"s";var r='\n            <div class="grid grid--space-between">\n                <div>\n                    <p><strong>'+i+"</strong> - Level "+o.city.buildings[t].level+" ("+n+")<p>\n                    <p>Upgrade Cost: "+o.resourceRequirement+'</p>\n                </div>\n                <button data-behaviour="upgrade" data-type="'+t+'" class="button button--primary">\n                    Upgrade\n                </button>\n            </div>';o.buildingTemplate+=r}),$('[data-element="buildings"]').html(e.buildingTemplate)},this.troopsInfo=function(t){var o=e;e.troopsTemplate="",Object.keys(e.city.troops).map(function(t,e){var i=o.city.troops[t].name;o.resourceRequirement="",o.resourceRequirement+="Food: "+o.city.troops[t].cost.food+" ",o.resourceRequirement+="Wood: "+o.city.troops[t].cost.wood+" ",o.resourceRequirement+="Stone: "+o.city.troops[t].cost.stone+" ",o.resourceRequirement+="Ore: "+o.city.troops[t].cost.ore+" ",o.resourceRequirement+="Gold: "+o.city.troops[t].cost.gold+" ";var s='\n            <div class="grid grid--space-between">\n                <div>\n                    <p><strong>'+i+"</strong> - "+o.city.troops[t].count+" in barracks ("+o.city.troops[t].time+"s)<p>\n                    <p>Training Cost: "+o.resourceRequirement+'</p>\n                </div>\n                <button data-behaviour="train" data-type="'+t+'" class="button button--primary">\n                    Train\n                </button>\n            </div>';o.troopsTemplate+=s}),$('[data-element="troops"]').html(e.troopsTemplate)},this.questInfo=function(t){e.questTemplate="";e.questTemplate+='\n        <div class="quest-map">\n            <div class="quest-map__cell quest-map__cell--current"><span>1:1</div>\n            <div class="quest-map__cell" data-behaviour="start-quest" data-location="1:2">1:2</div>\n            <div class="quest-map__cell" data-behaviour="start-quest">1:3</div>\n            <div class="quest-map__cell" data-behaviour="start-quest">2:1</div>\n            <div class="quest-map__cell" data-behaviour="start-quest">2:2</div>\n            <div class="quest-map__cell" data-behaviour="start-quest">2:3</div>\n            <div class="quest-map__cell" data-behaviour="start-quest">3:1</div>\n            <div class="quest-map__cell" data-behaviour="start-quest">3:2</div>\n            <div class="quest-map__cell" data-behaviour="start-quest">3:3</div>\n        </div>',e.questTemplate+='\n        <p class="bold">Current Quests</p>\n        <p>No current Quests</p>',$('[data-element="quests"]').html(e.questTemplate)},this.resourceProduction=function(t){var o=e;Object.keys(e.city.buildings).map(function(t,e){var i=o.city.buildings[t].level,s=o.city.buildings[t].output,n=o.city.buildings[t].resource,r=o.city.resources[n];o.city.resources[n]=Number(r+i*s)}),e.resourceInfo()},this.buildingsUpgrade=function(t){var o=$(t.currentTarget).data("type"),i=e.city.buildings[o].level+1;if(e.city.resources.food<e.city.buildings[o].cost.food*i||e.city.resources.wood<e.city.buildings[o].cost.wood*i||e.city.resources.stone<e.city.buildings[o].cost.stone*i||e.city.resources.ore<e.city.buildings[o].cost.ore*i||e.city.resources.gold<e.city.buildings[o].cost.gold*i)return s.default.openNotification("error","Not enough resources"),!1;var n=1e3,r=e;$('[data-behaviour="upgrade"]').attr("disabled",!0),e.city.resources.food-=e.city.buildings[o].cost.food*i,e.city.resources.wood-=e.city.buildings[o].cost.wood*i,e.city.resources.stone-=e.city.buildings[o].cost.stone*i,e.city.resources.ore-=e.city.buildings[o].cost.ore*i,e.city.resources.gold-=e.city.buildings[o].cost.gold*i,e.city.buildings[o].level>0&&(n=e.city.buildings[o].level*i+"000");var a=setInterval(function(){n-=1e3,$('[data-element="countdown"]').html(r.millisToMinutesAndSeconds(n)),0===n&&(clearInterval(a),r.city.buildings[o].level=Number(Object.assign(i,r.city.buildings[o].level)),r.buildingsInfo(),s.default.closeNotification())},1e3);s.default.openNotification("success","Upgrade of "+o+' in progress. Time remaining: <span data-element="countdown">Starting...</span>');e.resourceInfo(),e.saveGame()},this.trainTroops=function(t){var o=$(t.currentTarget).data("type");e.city.troops[o].count;if(e.city.resources.food<e.city.troops[o].cost.food||e.city.resources.wood<e.city.troops[o].cost.wood||e.city.resources.stone<e.city.troops[o].cost.stone||e.city.resources.ore<e.city.troops[o].cost.ore||e.city.resources.gold<e.city.troops[o].cost.gold)return s.default.openNotification("error","Not enough resources"),!1;s.default.openNotification("success","Purchase of 1 "+o+" in progress");var i=e;$('[data-behaviour="train"]').attr("disabled",!0),e.city.resources.food-=e.city.troops[o].cost.food,e.city.resources.wood-=e.city.troops[o].cost.wood,e.city.resources.stone-=e.city.troops[o].cost.stone,e.city.resources.ore-=e.city.troops[o].cost.ore,e.city.resources.gold-=e.city.troops[o].cost.gold;var n=setInterval(function(){0==(r-=i.city.troops[o].time)&&(clearInterval(n),i.city.troops[o].count+=1,i.troopsInfo(),s.default.closeNotification())},1e3),r=e.city.troops[o].time;e.resourceInfo(),e.saveGame()},this.marketplaceInfo=function(t){e.marketplaceTemplate='<p>All purchases cost 100 gold</p>\n        <p>\n        <button class="button button--primary" data-behaviour="purchase" data-resource-type="food">Buy 100 Food</button>\n        <button class="button button--primary" data-behaviour="purchase" data-resource-type="wood">Buy 100 Wood</button>\n        <button class="button button--primary" data-behaviour="purchase" data-resource-type="stone">Buy 100 Stone</button>\n        <button class="button button--primary" data-behaviour="purchase" data-resource-type="ore">Buy 100 Ore</button>\n        </p>',$('[data-element="marketplace"]').html(e.marketplaceTemplate)},this.purchaseResources=function(t){var o=$(t.currentTarget).data("resource-type");if(e.city.resources.gold-100<=0)return s.default.openNotification("error","Not enough gold"),!1;e.city.resources[o]+=100,e.city.resources.gold-=100,e.resourceInfo(),e.saveGame()},this.startQuest=function(t){n.default.openLightbox('\n        <p class="bold">Start your quest</p>\n        <p>To start your quest, choose the units to embark below:</p>\n        <button type="button" data-behaviour="close-lightbox">Begin quest</button>\n        ')},this.cityNameChange=function(t){var o=$(t.currentTarget).text();e.city.name=o},this.millisToMinutesAndSeconds=function(t){var e=Math.floor(t/6e4),o=(t%6e4/1e3).toFixed(0);return e+":"+(o<10?"0":"")+o},this.saveGame=function(t){localStorage.setItem("city",JSON.stringify(e.city))},this.loadGame=function(t){var o=localStorage.getItem("city");e.city=JSON.parse(o),e.cityInfo(),e.resourceInfo(),e.buildingsInfo()},this.city={id:1,name:"Mercia",location:"1:1",resources:{food:200,wood:200,stone:0,ore:0,gold:0},buildings:{farm:{name:"Farm",resource:"food",level:0,output:2,cost:{food:200,wood:100,stone:0,ore:0,gold:0},costMultiplier:1.25},forest:{name:"Forest",resource:"wood",level:0,output:1.5,cost:{food:100,wood:50,stone:0,ore:0,gold:0},costMultiplier:1.5},stonemine:{name:"Stone Mine",resource:"stone",level:0,output:1,cost:{food:100,wood:300,stone:0,ore:0,gold:0},costMultiplier:1.75},oremine:{name:"Ore Mine",resource:"ore",level:0,output:.75,cost:{food:100,wood:300,stone:100,ore:0,gold:0},costMultiplier:2},goldmine:{name:"Gold Mine",resource:"gold",level:0,output:.25,cost:{food:500,wood:300,stone:150,ore:50,gold:0},costMultiplier:2.5}},troops:{scout:{name:"Scout",cost:{food:50,wood:0,stone:0,ore:0,gold:0},count:0,time:2}}},this.cityInfo(),this.resourceInfo(),this.buildingsInfo(),this.troopsInfo(),this.marketplaceInfo(),this.questInfo(),$("body").on("click",'[data-behaviour="upgrade"]',this.buildingsUpgrade),$("body").on("click",'[data-behaviour="train"]',this.trainTroops),$("body").on("click",'[data-behaviour="start-quest"]',this.startQuest),$('[data-behaviour="save-game"]').on("click",this.saveGame),$('[data-behaviour="load-save"]').on("click",this.loadGame),$('[data-behaviour="purchase"]').on("click",this.purchaseResources),window.setInterval(this.resourceProduction,1e3),$(".editable").on("keyup",this.cityNameChange)}return i(t,[{key:"cityInfo",value:function(){this.cityTemplate="<p>\n        <span>City ID: "+this.city.id+'</span> |\n        <span>City Name: <span contenteditable="true" class="editable">'+this.city.name+"</span></span> |\n        <span>City Location: "+this.city.location+"</span>\n        </p>",$('[data-element="city"]').html(this.cityTemplate)}},{key:"resourceInfo",value:function(){this.resourceTemplate="<p>\n        <span>Food: "+this.city.resources.food+"</span> |\n        <span>Wood: "+this.city.resources.wood+"</span> |\n        <span>Stone: "+this.city.resources.stone+"</span> |\n        <span>Ore: "+this.city.resources.ore+"</span> |\n        <span>Gold: "+this.city.resources.gold+"</span>\n        </p>",$('[data-element="resources"]').html(this.resourceTemplate)}}]),t}();o.default=new a},{"./lightbox":3,"./notification":4}],3:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});o.default=new function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.openLightbox=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"No content";e.lightbox.addClass(e.openClass),e.lightbox.find(".lightbox__content").html(t),e.lightbox.prepend('<div class="lightbox__close" data-behaviour="close-lightbox">X</div>')},this.closeLightbox=function(t){e.lightbox.removeClass(e.openClass),e.lightbox.empty()},this.lightbox=$('[data-element="lightbox"]'),this.trigger=$('[data-behaviour="open-lightbox"]'),this.openClass="lightbox--is-open",this.close=$('[data-behaviour="close-lightbox"]'),this.trigger.on("click",this.openLightbox),$("body").on("click",this.close,this.closeLightbox)}},{}],4:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}();var s=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.closeNotification=function(t){"false"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"false")?(e.notification.hide(),e.cleanNotification()):setTimeout(function(){this.notification.hide(),this.cleanNotification()},3e3)},this.cleanNotification=function(){for(var t=Object.keys(e.notificationClass),o=0;o<t.length;o++)if(e.notification.hasClass("notification--"+t[o])){e.notification.removeClass("notification--"+t[o]);break}e.notificationContent.empty()},this.notificationClass={success:"notification--success",warning:"notification--warning",error:"notification--error"},this.notification=$('[data-element="notification"]'),this.notificationContent=$('[data-element="custom-response"]'),$('[data-behaviour="close-notification"]').on("click",this.closeNotification)}return i(t,[{key:"openNotification",value:function(t,e){this.notification.addClass("notification--"+t),this.notificationContent.html(e),this.notification.show()}}]),t}();o.default=new s},{}],5:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});o.default=new function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.toggleTab=function(t){var o=$(t.currentTarget),i=o.data("target"),s=$('[data-element="'+i+'"]');s.siblings().removeClass(e.class.content),s.addClass(e.class.content),e.tab.removeClass(e.class.button),o.addClass(e.class.button)},this.tab=$('[data-behaviour="tabs"]'),this.tab.on("click",this.toggleTab),this.class={button:"tabs__link--active",content:"tab-content__item--active"},this.tab.length>1&&this.tab[0].click()}},{}]},{},[1]);
!function(){return function e(t,i,o){function n(r,a){if(!i[r]){if(!t[r]){var c="function"==typeof require&&require;if(!a&&c)return c(r,!0);if(s)return s(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var l=i[r]={exports:{}};t[r][0].call(l.exports,function(e){var i=t[r][1][e];return n(i||e)},l,l.exports,e,t,i,o)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<o.length;r++)n(o[r]);return n}}()({1:[function(e,t,i){"use strict";e("./modules/game")},{"./modules/game":2}],2:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o,n=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=e("./notification"),r=(o=s,o&&o.__esModule?o:{default:o});var a=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.buildingsInfo=function(e){t.buildingTemplate='\n        <div class="grid grid--space-between">Farm Level '+t.city.buildings.farm.level+' <button data-behaviour="upgrade" data-type="farm" class="button button--primary">Upgrade '+t.city.buildings.farm.name+'</button></div>\n        <div class="grid grid--space-between">Forest level '+t.city.buildings.forest.level+' <button data-behaviour="upgrade" data-type="forest" class="button button--primary">Upgrade '+t.city.buildings.forest.name+'</button></div>\n        <div class="grid grid--space-between">Stone Mine level '+t.city.buildings.stonemine.level+' <button data-behaviour="upgrade" data-type="stonemine" class="button button--primary">Upgrade '+t.city.buildings.stonemine.name+'</button></div>\n        <div class="grid grid--space-between">Ore Mine level '+t.city.buildings.oremine.level+' <button data-behaviour="upgrade" data-type="oremine" class="button button--primary">Upgrade '+t.city.buildings.oremine.name+'</button></div>\n        <div class="grid grid--space-between">Gold Mine level '+t.city.buildings.goldmine.level+' <button data-behaviour="upgrade" data-type="goldmine" class="button button--primary">Upgrade '+t.city.buildings.goldmine.name+"</button></div>\n        ",$('[data-element="buildings"]').html(t.buildingTemplate)},this.resourceProduction=function(e){var i=t;Object.keys(t.city.buildings).map(function(e,t){var o=i.city.buildings[e].level,n=i.city.buildings[e].output,s=i.city.buildings[e].resource,r=i.city.resources[s];i.city.resources[s]=Number(r+o*n)}),t.resourceInfo()},this.buildingsUpgrade=function(e){var i=$(e.currentTarget).data("type"),o=t.city.buildings[i].level+1,n=0,s=t;if(t.city.resources.food<t.city.buildings[i].cost.food*o)return r.default.open("error","Not have enough resources"),!1;$('[data-behaviour="upgrade"]').attr("disabled",!0),t.city.resources.food-=t.city.buildings[i].cost.food*o,t.city.resources.wood-=t.city.buildings[i].cost.wood*o,t.city.resources.stone-=t.city.buildings[i].cost.stone*o,t.city.resources.ore-=t.city.buildings[i].cost.ore*o,t.city.resources.gold-=t.city.buildings[i].cost.gold*o,0===t.city.buildings[i].level?(n=1e3,setTimeout(function(){a()},n)):(n=t.city.buildings[i].level*o+"000",setTimeout(function(){a()},n));function a(){s.city.buildings[i].level=Number(Object.assign(o,s.city.buildings[i].level)),s.buildingsInfo()}t.resourceInfo()},this.cityNameChange=function(e){var i=$(e.currentTarget).text();t.city.name=i},this.saveGame=function(e){localStorage.setItem("city",JSON.stringify(t.city))},this.loadGame=function(e){var i=localStorage.getItem("city");t.city=JSON.parse(i),t.cityInfo(),t.resourceInfo(),t.buildingsInfo()},this.city={id:1,name:"Mercia",location:"1:1",resources:{food:200,wood:200,stone:0,ore:0,gold:0},buildings:{farm:{name:"Farm",resource:"food",level:0,output:2,cost:{food:200,wood:100,stone:0,ore:0,gold:0},costMultiplier:1.25},forest:{name:"forest",resource:"wood",level:0,output:1.5,cost:{food:200,wood:100,stone:0,ore:0,gold:0},costMultiplier:1.5},stonemine:{name:"Stone Mine",resource:"stone",level:0,output:1,cost:{food:200,wood:100,stone:0,ore:0,gold:0},costMultiplier:1.75},oremine:{name:"Ore Mine",resource:"ore",level:0,output:.75,cost:{food:200,wood:100,stone:0,ore:0,gold:0},costMultiplier:2},goldmine:{name:"Gold Mine",resource:"gold",level:0,output:.25,cost:{food:200,wood:100,stone:0,ore:0,gold:0},costMultiplier:2.5}}},this.cityInfo(),this.resourceInfo(),this.buildingsInfo(),$("body").on("click",'[data-behaviour="upgrade"]',this.buildingsUpgrade),$('[data-behaviour="save-game"]').on("click",this.saveGame),$('[data-behaviour="load-save"]').on("click",this.loadGame),window.setInterval(this.resourceProduction,1e3),$(".editable").on("keyup",this.cityNameChange)}return n(e,[{key:"cityInfo",value:function(){this.cityTemplate="<p>\n        <span>City ID: "+this.city.id+'</span> |\n        <span>City Name: <span contenteditable="true" class="editable">'+this.city.name+"</span></span> |\n        <span>City Location: "+this.city.location+"</span>\n        </p>",$('[data-element="city"]').html(this.cityTemplate)}},{key:"resourceInfo",value:function(){this.resourceTemplate="<p>\n        <span>Food: "+this.city.resources.food+"</span> |\n        <span>Wood: "+this.city.resources.wood+"</span> |\n        <span>Stone: "+this.city.resources.stone+"</span> |\n        <span>Ore: "+this.city.resources.ore+"</span> |\n        <span>Gold: "+this.city.resources.gold+"</span>\n        </p>",$('[data-element="resources"]').html(this.resourceTemplate)}}]),e}();i.default=new a},{"./notification":3}],3:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function o(){this.notificationClass={success:"notification--success",warning:"notification--warning",error:"notification--error"};for(var e=Object.keys(this.notificationClass),t=0;t<e.length;t++)if($('[data-element="notification"]').hasClass("notification--"+e[t])){$('[data-element="notification"]').removeClass("notification--"+e[t]);break}$('[data-element="custom-response"]').empty()}i.default={open:function(e,t){this.notificationClass={success:"notification--success",warning:"notification--warning",error:"notification--error"},this.notification=$('[data-element="notification"]'),this.notificationContent=$('[data-element="custom-response"]'),this.notification.addClass("notification--"+e),this.notificationContent.html(t),this.notification.show()},close:function(){$('[data-behaviour="close-notification"]').on("click",function(){$('[data-element="notification"]').hide(),o()})}}},{}]},{},[1]);
!function(){return function e(t,o,i){function n(s,c){if(!o[s]){if(!t[s]){var a="function"==typeof require&&require;if(!c&&a)return a(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=o[s]={exports:{}};t[s][0].call(l.exports,function(e){var o=t[s][1][e];return n(o||e)},l,l.exports,e,t,o,i)}return o[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}}()({1:[function(e,t,o){"use strict";e("./modules/game")},{"./modules/game":2}],2:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i,n=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}(),r=e("./notification"),s=(i=r,i&&i.__esModule?i:{default:i});var c=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.buildingsInfo=function(e){var o=t;t.buildingTemplate="",Object.keys(t.city.buildings).map(function(e,t){var i=o.city.buildings[e].name,n=o.city.buildings[e].level+1,r="";o.resourceRequirement="",o.resourceRequirement+="Food: "+o.city.buildings[e].cost.food*n+" ",o.resourceRequirement+="Wood: "+o.city.buildings[e].cost.wood*n+" ",o.resourceRequirement+="Stone: "+o.city.buildings[e].cost.stone*n+" ",o.resourceRequirement+="Ore: "+o.city.buildings[e].cost.ore*n+" ",o.resourceRequirement+="Gold: "+o.city.buildings[e].cost.gold*n+" ",r=o.city.buildings[e].level*n==0?"1s":o.city.buildings[e].level*n+"s";var s='\n            <div class="grid grid--space-between">\n                <div>\n                    <p><strong>'+i+"</strong> - Level "+o.city.buildings[e].level+" ("+r+")<p>\n                    <p>Upgrade Cost: "+o.resourceRequirement+'</p>\n                </div>\n                <button data-behaviour="upgrade" data-type="'+e+'" class="button button--primary">\n                    Upgrade\n                </button>\n            </div>';o.buildingTemplate+=s}),$('[data-element="buildings"]').html(t.buildingTemplate)},this.resourceProduction=function(e){var o=t;Object.keys(t.city.buildings).map(function(e,t){var i=o.city.buildings[e].level,n=o.city.buildings[e].output,r=o.city.buildings[e].resource,s=o.city.resources[r];o.city.resources[r]=Number(s+i*n)}),t.resourceInfo()},this.buildingsUpgrade=function(e){var o=$(e.currentTarget).data("type"),i=t.city.buildings[o].level+1;if(t.city.resources.food<t.city.buildings[o].cost.food*i||t.city.resources.wood<t.city.buildings[o].cost.wood*i||t.city.resources.stone<t.city.buildings[o].cost.stone*i||t.city.resources.ore<t.city.buildings[o].cost.ore*i||t.city.resources.gold<t.city.buildings[o].cost.gold*i)return s.default.openNotification("error","Not enough resources"),!1;s.default.openNotification("success","Upgrade of "+o+" in progress");var n=1e3,r=t;$('[data-behaviour="upgrade"]').attr("disabled",!0),t.city.resources.food-=t.city.buildings[o].cost.food*i,t.city.resources.wood-=t.city.buildings[o].cost.wood*i,t.city.resources.stone-=t.city.buildings[o].cost.stone*i,t.city.resources.ore-=t.city.buildings[o].cost.ore*i,t.city.resources.gold-=t.city.buildings[o].cost.gold*i,t.city.buildings[o].level>0&&(n=t.city.buildings[o].level*i+"000");var c=setInterval(function(){0==(n-=1e3)&&(clearInterval(c),r.city.buildings[o].level=Number(Object.assign(i,r.city.buildings[o].level)),r.buildingsInfo(),s.default.closeNotification())},1e3);t.resourceInfo()},this.marketplaceInfo=function(e){t.marketplaceTemplate='<p>All purchases cost 100 gold</p>\n        <p>\n        <button data-behaviour="purchase" data-resource-type="food">Buy 100 Food</button>\n        <button data-behaviour="purchase" data-resource-type="wood">Buy 100 Wood</button>\n        <button data-behaviour="purchase" data-resource-type="stone">Buy 100 Stone</button>\n        <button data-behaviour="purchase" data-resource-type="ore">Buy 100 Ore</button>\n        </p>',$('[data-element="marketplace"]').html(t.marketplaceTemplate)},this.purchaseResources=function(e){var o=$(e.currentTarget).data("resource-type");if(t.city.resources.gold-100<=0)return s.default.openNotification("error","Not enough gold"),!1;t.city.resources[o]+=100,t.city.resources.gold-=100,t.resourceInfo()},this.cityNameChange=function(e){var o=$(e.currentTarget).text();t.city.name=o},this.saveGame=function(e){localStorage.setItem("city",JSON.stringify(t.city))},this.loadGame=function(e){var o=localStorage.getItem("city");t.city=JSON.parse(o),t.cityInfo(),t.resourceInfo(),t.buildingsInfo()},this.city={id:1,name:"Mercia",location:"1:1",resources:{food:200,wood:200,stone:0,ore:0,gold:0},buildings:{farm:{name:"Farm",resource:"food",level:0,output:2,cost:{food:200,wood:100,stone:0,ore:0,gold:0},costMultiplier:1.25},forest:{name:"Forest",resource:"wood",level:0,output:1.5,cost:{food:100,wood:50,stone:0,ore:0,gold:0},costMultiplier:1.5},stonemine:{name:"Stone Mine",resource:"stone",level:0,output:1,cost:{food:100,wood:300,stone:0,ore:0,gold:0},costMultiplier:1.75},oremine:{name:"Ore Mine",resource:"ore",level:0,output:.75,cost:{food:100,wood:300,stone:100,ore:0,gold:0},costMultiplier:2},goldmine:{name:"Gold Mine",resource:"gold",level:0,output:.25,cost:{food:500,wood:300,stone:150,ore:50,gold:0},costMultiplier:2.5}}},this.cityInfo(),this.resourceInfo(),this.buildingsInfo(),this.marketplaceInfo(),$("body").on("click",'[data-behaviour="upgrade"]',this.buildingsUpgrade),$('[data-behaviour="save-game"]').on("click",this.saveGame),$('[data-behaviour="load-save"]').on("click",this.loadGame),$('[data-behaviour="purchase"]').on("click",this.purchaseResources),window.setInterval(this.resourceProduction,1e3),$(".editable").on("keyup",this.cityNameChange)}return n(e,[{key:"cityInfo",value:function(){this.cityTemplate="<p>\n        <span>City ID: "+this.city.id+'</span> |\n        <span>City Name: <span contenteditable="true" class="editable">'+this.city.name+"</span></span> |\n        <span>City Location: "+this.city.location+"</span>\n        </p>",$('[data-element="city"]').html(this.cityTemplate)}},{key:"resourceInfo",value:function(){this.resourceTemplate="<p>\n        <span>Food: "+this.city.resources.food+"</span> |\n        <span>Wood: "+this.city.resources.wood+"</span> |\n        <span>Stone: "+this.city.resources.stone+"</span> |\n        <span>Ore: "+this.city.resources.ore+"</span> |\n        <span>Gold: "+this.city.resources.gold+"</span>\n        </p>",$('[data-element="resources"]').html(this.resourceTemplate)}}]),e}();o.default=new c},{"./notification":3}],3:[function(e,t,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,o,i){return o&&e(t.prototype,o),i&&e(t,i),t}}();var n=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.closeNotification=function(e){"false"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"false")?(t.notification.hide(),t.cleanNotification()):setTimeout(function(){this.notification.hide(),this.cleanNotification()},3e3)},this.cleanNotification=function(){for(var e=Object.keys(t.notificationClass),o=0;o<e.length;o++)if(t.notification.hasClass("notification--"+e[o])){t.notification.removeClass("notification--"+e[o]);break}t.notificationContent.empty()},this.notificationClass={success:"notification--success",warning:"notification--warning",error:"notification--error"},this.notification=$('[data-element="notification"]'),this.notificationContent=$('[data-element="custom-response"]'),$('[data-behaviour="close-notification"]').on("click",this.closeNotification)}return i(e,[{key:"openNotification",value:function(e,t){this.notification.addClass("notification--"+e),this.notificationContent.html(t),this.notification.show()}}]),e}();o.default=new n},{}]},{},[1]);